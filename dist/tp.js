!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.TP=t()}(this,function(){"use strict";var h=["pending"],p=["reject"],d=["resolve"];function v(n){}function y(n){return function(){n&&n.apply(this,arguments),n=null}}function m(n){var t=h,e=null,r=[],c=[],o=v,u={get status(){return t[0]},get value(){return e},catch:function(n){return m.then(null,n)},then:function(e,u){return new m(function(n,t){o(),r.push(i.call(this,n,e,t,n)),c.push(i.call(this,n,u,t,t))})}};function i(u,t,r,e){var c,o=this;return function(n){try{t instanceof Function?function t(n){var e=r;try{if(n==o)throw TypeError("promise can`t return itself");n===Object(n)&&"function"==typeof(c=n.then)?c.call(n,y(function(n){e=v,t(n)}),function(n){e(n)}):u(n)}catch(n){e(n)}}(t(n)):e(n)}catch(n){r(n)}}}var f=Object.create(u);if(n instanceof Function)try{n.call(f,y(l),y(a))}catch(n){a(n)}else l(n);return f;function l(n){t===h&&(t=d,(o=s.bind(null,r,e=n))())}function a(n){t===h&&(t=p,(o=s.bind(null,c,n))())}function s(e,u){setTimeout(function(){for(var n,t=0;n=e[t];t++)n(u);c.length=0,r.length=0},0)}}return m.all=function(e){return new _Promise(function(n,t){e.forEach(function(n,t){})})},m.race=function(n){return new m(function(t,e){n.forEach(function(n){n.then(t,e)})})},m.reject=function(e){return new m(function(n,t){t(e)})},m.resolve=function(t){return new m(function(n){n(t)})},m.deferred=function(){var e,u;return{promise:m(function(n,t){e=n,u=t}),resolve:e,reject:u}},m});
